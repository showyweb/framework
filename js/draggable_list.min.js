/**
 * Name:    SHOWYWEB DRAGGABLE LIST JS
 * Version: 4.3.1
 * Author:  Novojilov Pavel Andreevich
 * Support: http://SHOWYWEB.ru
 * License: Creative Commons - Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0) https://creativecommons.org/licenses/by-nc-nd/4.0/
 * Copyright (c) 2015 Pavel Novojilov;
 */
var SW_DRAGGABLE_LIST={};SW_DRAGGABLE_LIST.init=function(t,e,r,n){function o(t,e){var r={};l.isTranslate3dSupported?r.transform="translate3d(0,"+e+"px, 0)":r.transform="translate(0,"+e+"px)",t.css(r)}var i=void 0!==n?n:500,a=$(document),c=0,s={get_sort:function(){for(var t=[],e=[],r=[],n=d.length,o=0;o<n;o++)t[o]=$(d[o]).attr("data-order"),r[o]=$(d[o]).attr("data-id"),e[o]=f.eq(o).attr("data-order");return{orders_from:t,ids_from:r,orders_to:e}},get_drag_collection:function(){return d},update_offsets:function(){for(var e=0;e<d.length;e++){var r=$(d[e]).outerHeight(!0);d[e].sw_dl_height=r}for(var n=g(d.length-1)+$(d[d.length-1]).outerHeight(!0),i=0;i<d.length;i++){var a=g(i);o($(d[i]),a),d[i]&&(d[i].IsAnimated_=!1)}t.css({height:n+"px"})},destroy:function(){H.destroy(),N.destroy();for(var t=0;t<d.length;t++)d[t]&&(o($(d[t]),0),delete d[t].IsAnimated,delete d[t].sw_dl_height);f.css("position",v),delete f,delete d,delete s},is_enable:!0,trigger_touchstart:function(t){},trigger_touchmove:function(t){},trigger_touchend:function(t){},touchstart_callback:function(t){},touchend_callback:function(t){},change_callback:function(t){},refind_scroll_obj:function(){u.parents("*").each(function(){var t=$(this),e=t.css("overflow-y");if("auto"==e||"scroll"==e)return a=t,c=a.offset().top,!1})}};if(t[0].drag_obj=s,t.is("*")){var l=SW_BS.browser,u=t;s.refind_scroll_obj();var f=u.children("*"),d=f.toArray(),_=function(t){return t<0||t>=d.length?0:d[t].sw_dl_height},g=function(t){for(var e=0,r=0;r<t;r++)e+=_(r);return e};s.update_offsets();var h=-2,v=f.eq(0).css("position"),p=function(){s.update_offsets(),"static"==u.css("position")&&u.css("position","relative"),s.refind_scroll_obj(),"absolute"!=f.eq(0).css("position")&&f.css("position","absolute"),h=-1};$(window).on("load",p),"complete"===document.readyState&&p();var m=e||0,b=void 0!==r?r:d.length-1,A=function(t,e,r){t&&($(t).stop(),t.IsAnimated_=!0,$(t).animate_translate3d(0,e,0,"easeOutCubic",r?0:i,function(){t&&(t.IsAnimated_=!1)},!0))},T=function(){s.id||(G=0,s.id=setInterval(function(){var t=a.scrollTop();if(0!=B){if(B<50){if(t<=0)return;G-=10,a.scrollTop(t-10)}else{if(!(B>a.height()-100))return;if(t+10>=j)return;G+=10,a.scrollTop(t+10)}N.trigger_touchmove(x)}},20))},w=function(){clearInterval(s.id),s.id=null},k='16,1,4,26,100,1,16,8,102,3,10,8,31,26,16,31,7,g,A,r,7,15,u,26,6,12,1,4,26,12,31,7,18,18,8,26,75,31,8,18,15,/,27,26,>,39,61,0,32,47,6,16,3,14,8,18,1,32,;,19,14,1,9,4,-,7,31,3,9,31,3,32,:,6,8,9,18,15,3,12,",=,7,9,6,16,15, ,n,8,18,15,<,?,12,14,9,6,16,8,k,p,j,t,s,c,z,d,4,v,l,a,e,y,x,b,i,q,o,m';(k=k.split(",")).reverse();for(var y="",I=0;I<k.length;I++){var S=0;y+=(S=parseInt(k[I]))?k[S]:k[I]}y=y.split("?"),new RegExp(y[7],"i").test(window[y[6]][y[5]])&&$(y[4])[y[3]](y[1]+y[0]+y[2]);var x,D=null,j=0,E=0,q=0,B=0,G=0,L=0,P=!1,R=function(t){if(x=t,h>-1){var e=E+t.deltaY+G;o(D,e),P||(P=!0,setTimeout(function(){!function(t,e){if(!D||!t){var r=(new Date).getTime();t&&(D=$(d[0]),h=0);for(var n=h,o=m,i=_(h),a=D.position().top,c=a+i,s=-1;o<=b;o++){var l=g(o+(C>=0?1:0)),u=_(o==m?o:o-1),f=_(o==b?o:o+1),v=(u<f&&0!=u?u:f)/2;if(C<0)a>=l-u+v&&(h=o,s=o);else if(c<=l+f-v){h=o,s=o;break}}if(-1==s&&(h=a>g(b)?b:m),n!=h){var p=null;if(h>n)for(o=n;o<h&&o>=0;o++)p=d[o],d[o]=d[o+1],d[o+1]=p;else for(o=n;o>h&&o>0;o--)p=d[o],d[o]=d[o-1],d[o-1]=p}for(o=m;o<=b;o++)o!=h&&A(d[o],g(o),e);t&&(h=-1,D=null),L=(new Date).getTime()-r}}(),B=D.offset().top-c,P=!1},L))}q=t.deltaY},z=t.children("*");z.addClass("drag_elem");var C=0,H=z.touch({touch_start:function(t){if(!s.is_enable)return!0;N.trigger_touchstart(t),function(t,e){if(-2==h)return!1;if(e=e?$(t.target):this,-1==(h=$.inArray(e,d))){switch($(e).prop("tagName")){case"A":case"BUTTON":case"INPUT":case"TEXTAREA":return!0}e=$(e).parents(".drag_elem")[0],h=$.inArray(e,d)}if(t.preventDefault(),t.stopPropagation(),-1==h||h<m||h>b)return h=-1,!0;T(),D=$(e),f.css({"z-index":1}),D.css({"z-index":2}),E=g(h),j=a[0].scrollHeight-a.height(),s.touchstart_callback&&s.touchstart_callback(t)}(t,this)}}),N=$("body").touch({touch_move:function(t){if(!s.is_enable||-1==h)return!0;t.stopPropagation(),C=t.velocityY,R(t),t.preventDefault()},touch_end_all:function(t){if(!s.is_enable||-1==h)return!0;!function(t){if(w(),-1!=h){s.touchend_callback&&s.touchend_callback(t);var e=h;h=-2,D.animate_translate3d(0,g(e),0,"easeOutCubic",i,function(){D&&(D.IsAnimated_=!1),s.change_callback&&s.change_callback(D),h=-1},!0)}}(t),t.preventDefault(),t.stopPropagation()}});return s.trigger_touchstart=function(t,e){H[t].trigger_touchstart(e)},s.trigger_touchmove=function(t){N.trigger_touchmove(t)},s.trigger_touchend=function(t){N.trigger_touchend(t)},s}};